(function(e){function n(n){for(var r,o,u=n[0],c=n[1],l=n[2],d=0,f=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);s&&s(n);while(f.length)f.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,u=1;u<t.length;u++){var c=t[u];0!==i[c]&&(r=!1)}r&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},i={app:0},a=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var s=c;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},cd49:function(e,n,t){"use strict";t.r(n);var r,i,a=t("42c2"),o=t("f5f2"),u=t("30c6"),c=(t("9531"),t("26d3"),t("2007"),t("41ab"),t("df26"),t("868d"),t("ef1f"),t("f528")),l=window,s=new c["TinyEmitter"],d={},f=function(e){return l.WKWebViewJavascriptBridge?e(l.WKWebViewJavascriptBridge):l.WKWVJBCallbacks?l.WKWVJBCallbacks.push(e):(l.WKWVJBCallbacks=[e],void l.webkit.messageHandlers.iOS_Native_InjectJavascript.postMessage(null))},p="none";l.LiveCloudBridge?(p="android",l.liveCloudNativeEventCallback=function(e){if(e.needReturn)return d[e.name](e.payload);s.emit(e.name,e.payload)}):null!==(r=l.webkit)&&void 0!==r&&null!==(i=r.messageHandlers)&&void 0!==i&&i.iOS_Native_InjectJavascript&&(p="ios",f((function(e){e.registerHandler("liveCloudNativeEventCallback",(function(e){s.emit(e.name,e.payload)}))})));var v=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,i){var a;"android"===p?(a=t?l.LiveCloudBridge[e](t):l.LiveCloudBridge[e](),r(a)):"ios"===p?f((function(i){n?i.callHandler(e,t,(function(e){a=JSON.parse(e),r(a)})):(i.callHandler(e,t,null),r(a))})):i("No bridge.")}))},h=function(){function e(){Object(o["a"])(this,e)}return Object(u["a"])(e,null,[{key:"on",value:function(e,n){s.on(e,n)}},{key:"bindReturnFunc",value:function(e,n){d[e]=n}},{key:"connect",value:function(){return new Promise((function(n,t){v("connect",!1).then((function(){e.connected=!0,n()})).catch((function(){e.connected=!1,t()}))}))}},{key:"fullscreen",value:function(){return v("fullscreen",!1)}},{key:"exit",value:function(){return v("exit",!1)}},{key:"getDeviceInfo",value:function(){return v("getDeviceInfo")}},{key:"playBackgroundStream",value:function(e){return v("playBackgroundStream",!1,e)}}]),e}();h.connected=!1;var y=h,b=function(){function e(){var n=this;Object(o["a"])(this,e),this.playedTime=0,this.currM3u8Index=0,this.video=document.getElementById("background-player"),y.connect().then(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:y.on("playStream",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.payload=t,!n.payload.isLive){e.next=5;break}n.playFlv(),e.next=7;break;case 5:return e.next=7,n.playHls(n.payload.ts);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),y.bindReturnFunc("getPlayedTime",(function(){return n.getCurrPlayedTime(),n.playedTime}));case 2:case"end":return e.stop()}}),e)}))))}return Object(u["a"])(e,[{key:"playFlv",value:function(){var e=this;NodePlayer.load((function(){e.flv=new NodePlayer,e.flv.setScaleMode(1),e.flv.setView(e.video.id),e.flv.start("https:"+e.payload.src[e.currM3u8Index])}))}},{key:"playHls",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,t=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:0,this.hls&&(this.hls.destroy(),this.hls=void 0),this.hls=new Hls({startPosition:n}),this.hls.loadSource("https:"+this.payload.src[this.currM3u8Index]),this.hls.attachMedia(this.video),e.next=7,this.video.play();case 7:this.video.addEventListener("ended",Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.currM3u8Index<t.payload.src.length-1)){e.next=5;break}return t.getCurrPlayedTime(),t.currM3u8Index++,e.next=5,t.playHls();case 5:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"getCurrPlayedTime",value:function(){0===this.currM3u8Index?this.playedTime=this.video.currentTime-this.payload.ts:this.playedTime+=this.video.currentTime}}]),e}();n["default"]=b;new b}});
//# sourceMappingURL=app.ed80658b.js.map